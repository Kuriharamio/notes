# 数电（五）：时序逻辑电路

## 1、概述

- 在任意时刻的输出信号不仅取决于当时的输入信号，**还取决于电路原来的状态**

- 可由组合逻辑电路、存储电路组合而成

  <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\时序逻辑电路框图.png" style="zoom:50%;" />



### ①分类

- 触发器动作特点
  - 同步时序逻辑电路：所有触发器使用同一个时钟，触发器在时钟脉冲的作用下同时翻转
  - 异步时序逻辑电路：所有触发器不是使用同一个时钟，触发器在脉冲作用下不同时翻转

- 输出信号特点

  - 米利（Mealy）型：输出信号受输入影响
    $$
    Y=F(X,Q)
    $$

  - 穆尔（Moore）型：输出信号仅取决于储存电路的状态
    $$
    Y=F(Q)
    $$



### ②三个方程组

$$
\begin{cases}
①输出方程：&Y&=&F(X,Q)
\\②驱动方程：&Z&=&G(X,Q)
\\③状态方程：&Q^*&=&H(Z,Q)

\end{cases}
$$

- 所有变量都受到输入变量 $X$ 与本时刻电路输出状态 $Q$ 的制约

- 示例

  <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\示例电路.png" style="zoom:75%;" />

  - 输出方程
    $$
    Y=F(X,Q)=Q_2Q_3
    $$

  - 驱动方程
    $$
    Z=G(X,Q)=\begin{cases}
    J_1=(Q_2Q_3)'\ \ \ \ \ \ K_1=1\\
    J_2=Q_1\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ K_2=(Q_1'Q_3')'\\
    J_3=Q_1Q_2\ \ \ \ \ \ \ \ \ \ K_3=Q_2
    \end{cases}
    $$

  - 状态方程
    $$
    Q^*=H(Z,Q)=JQ'+K'Q=
    \begin{cases}
    Q_1^*=(Q_2Q_3)'·Q_1'\\
    Q_2^*=Q_1Q_2'+Q_1'Q_3'Q_2\\
    Q_3^*=Q_1Q_2Q_3'+Q_2'Q_3
    \end{cases}
    $$
    

### ③分析方法

1. 写出每个触发器的**驱动方程**
2. 根据驱动方程写出**状态方程**
3. 根据逻辑图写出**输出方程**
4. 根据状态方程列出**状态转换表**
5. 由状态转换表分析**逻辑功能**



- 如上图示例:

  - **列出转换表**

  | $CLK$ | $Q_3Q_2Q_1$ | $J_3$ | $K_3$ | $J_2$ | $K_2$ | $J_1$ | $K_1$ |
  | :---: | :---------: | :---: | :---: | :---: | :---: | :---: | :---: |
  |   0   |     000     |   0   |   0   |   0   |   0   |   1   |   1   |
  |   1   |     001     |   0   |   0   |   1   |   1   |   1   |   1   |
  |   2   |     010     |   0   |   1   |   0   |   0   |   1   |   1   |
  |   3   |     011     |   1   |   1   |   1   |   1   |   1   |   1   |
  |   4   |     100     |   0   |   0   |   0   |   1   |   1   |   1   |
  |   5   |     101     |   0   |   0   |   1   |   1   |   1   |   1   |
  |   6   |     110     |   0   |   1   |   0   |   1   |   0   |   1   |
  |   7   |     000     |   0   |   0   |   0   |   0   |   1   |   1   |
  |   8   |     001     |   0   |   0   |   1   |   1   |   1   |   1   |

  - **分析功能**：每来7个脉冲，电路的状态就循环一次，即：七进制计数器

  - **检查自启动**

    | $CLK$ | $Q_3Q_2Q_1$ | $J_3$ | $K_3$ | $J_2$ | $K_2$ | $J_1$ | $K_1$ |
    | :---: | :---------: | :---: | :---: | :---: | :---: | :---: | :---: |
    |   X   |     111     |   1   |   1   |   1   |   1   |   0   |   1   |
    |  X+1  |     000     |   0   |   0   |   0   |   0   |   1   |   1   |

    检查未出现的状态，能够回到主循环

  - **状态转换图**

    <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\示例状态转换图.png" style="zoom:75%;" />

    - 斜杠上方为输入量，本例中无输入

  - 时序图

    <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\示例时序图.png" style="zoom:75%;" />



- 对于异步时序逻辑电路，还需写出**各个触发器的时钟信号**
  - 示例为异步十进制计数器

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\异步时序逻辑电路示例.png" style="zoom:67%;" />
$$
除三个方程组外，还需列出：\begin{cases}
clk_0=clk\\
clk_1=clk_3=Q_0\\
clk_2=Q_1
\end{cases}
$$
<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\异步时序逻辑电路示例状态转换表.png" style="zoom:18%;" />

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\异步时序逻辑电路示例状态转换图.png" style="zoom:15%;" />

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\异步时序逻辑电路示例时序图.png" style="zoom:18%;" />



## 2、计数器

- 分类
  - 按时钟
    - 同步计数器
    - 异步计数器
  - 按计数过程中数字增减
    - 加法计数器
    - 减法计数器
    - 可逆计数器
  - 按计数器中的数字编码
    - 二进制计数器
    - 二 - 十进制计数器
    - 循环码计数器
  - 按技术容量
    - 二进制计数器
    - 十进制计数器
    - 六十进制计数器



### ①加法计数器

- 原理

  - 若第 $i$ 位以下皆为 $1$ 时，则第 $i$ 位应翻转

  - 若用 $T$ 触发器构成计数器：
    $$
    \begin{cases}
    T_i=Q_{i-1}Q_{i-2}...Q_0\\
    T_0=1
    \end{cases}
    $$

- 对于4位同步二进制加法计数器：

  <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\四位同步二进制加法计数器.png" style="zoom: 67%;" />

  - 由原理可得驱动方程：

  $$
  \begin{cases}
  T_0=1\\
  T_1=Q_0\\
  T_2=Q_0Q_1\\
  T_3=Q_0Q_1Q_2
  \end{cases}
  $$

  - 由 $T$ 触发器的特性方程
    $$
    Q^*=TQ'+T'Q
    $$
    得状态方程
    $$
    \begin{cases}
    Q_0^*=Q_0'\\
    Q_1^*=Q_0\bigoplus Q_2\\
    Q_2^*=(Q_0Q_1)\bigoplus Q_2\\
    Q_3^*=(Q_0Q_1Q_2)\bigoplus Q_3
    \end{cases}
    $$

  - 输出方程
    $$
    C=Q_0Q_1Q_2Q_3
    $$

  - 状态转换表

    <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\四位同步二进制加法计数器状态转换表.png" style="zoom:22%;" />

  - 状态转换图

    <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\四位同步二进制加法计数器状态转换图.png" style="zoom:15%;" />

  - 时序图

    <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\四位同步二进制加法计数器时序图.png" style="zoom: 67%;" />

  - 逻辑功能

    - 每输入 $16$ 个 $CLK$ 脉冲，触发器的状态循环，并在输出端 $C$ 产生一进位信号，故为16进制计数器
      - 若二进制数码的位数为 $n$，而计数器的循环周期为 $2^n$ 
        - 则这种计数器又称为二进制计数器，能计到的最大的数为计数器的容量 $2^n-1$
    - 计数器有分频功能，也称为**分频器**（由时序图可看出）
  
  
  
  - 中规模集成的4位同步二进制计数器 $74161（74LS161与74161只是在内部结构有些区别）$
  
    <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\74161.png" style="zoom:20%;" />
  
    - **$R_D'$ ：异步清零端**
      - **低电平清零（不受时钟控制）**
    - **$LD'$：同步置数端**
      - **低电平置数（受时钟控制，上升沿置数）**
    - **$EP、ET$：工作状态控制端**
      - **$EP=ET=1$ 时，计数器计数**
    - **$D_0 - D_3$ ：预置数输入端**
    - **$Q_0 - Q_3$：计数输出端**



### ②减法计数器

- 基本与加法计数器同理

$$
\begin{cases}
T_i=Q_{i-1}'Q_{i-2}''...Q_0'\\
T_0=1
\end{cases}
$$

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\四位同步二进制减法计数器.png" style="zoom: 40%;" />
$$
驱动方程\begin{cases}
T_0=1\\
T_1=Q_0'\\
T_2=Q_0'Q_1'\\
T_3=Q_0'Q_1'Q_2'
\end{cases}
$$

$$
输出方程:B=Q_0'Q_1'Q_2'Q_3'
$$

### ③可逆计数器

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\可逆计数器形式.png" style="zoom: 67%;" />

- $74LS191$（使用加减控制方式）

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\74LS191.png" style="zoom:50%;" />

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\74LS191电路图.png" style="zoom:75%;" />

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\74LS191功能表.png" style="zoom:50%;" />



- $74LS193$ （使用双时钟方式）

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\74LS193.png" style="zoom: 16%;" />

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\74LS193电路图.png" style="zoom:75%;" />



### ④同步十进制计数器

#### Ⅰ 加法计数器

- 基本原理：**在四位二进制计数器基础上修改，当计到 1001 时，则下一个 $CLK$ 电路状态回到 0000**

  <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\十进制计数器.png" style="zoom: 50%;" />

$$
驱动方程\begin{cases}
T_0=1\\
T_1=Q_0\ \ \rarr\ \ Q_0Q_3'\\
T_2=Q_0Q_1\\
T_3=Q_2Q_1Q_0\ \ \rarr\ \ Q_2Q_1Q_0+Q_3Q_0
\end{cases}
$$

$$
状态方程\begin{cases}
Q_0^∗=Q_0'\\
Q_1^∗=Q_0Q_3'Q_1'+(Q_0Q_3' )' Q_1\\
Q_2^∗=Q_0 Q_1 Q_2'+(Q_0Q_1 )' Q_2\\
Q_3^∗=(Q_0Q_1Q_2+Q_0Q_3)Q_3' +(Q_0Q_1Q_2+Q_0Q_3)'Q_3
\end{cases}
$$

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\十进制计数器状态转换图.png" style="zoom:50%;" />



#### Ⅱ 减法计数器

- 基本原理：在四位二进制计数器基础上修改，当计到 0000 时，则下一个 $CLK$ 电路状态回到 1001

  <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\十进制减法计数器.png" style="zoom: 60%;" />

$$
驱动方程\begin{cases}
T_0=1\\
T_1=Q_0’\ \ \ \ \ \ \ \rarr Q_0'(Q_3'Q_2'Q_1')'\\
T_2=Q_0'Q_1'\ \ \rarr Q_0'Q_1'(Q_3'Q_2'Q_1')'\\
T_3=Q_2'Q_1'Q_0'
\end{cases}
$$

$$
状态方程\begin{cases}
𝑄_0^∗=𝑄_0'\\𝑄_1^∗=𝑄_0' (𝑄_2+𝑄_3)𝑄_1'+𝑄_0 𝑄_1\\𝑄_2^∗=(𝑄_0' 𝑄_1' 𝑄_3')𝑄_2'+(𝑄_0+𝑄_1)𝑄_2\\𝑄_3^∗=(𝑄_0' 𝑄_1' 𝑄_2')𝑄_3'+(𝑄_0+𝑄_1+𝑄_2)𝑄_3
\end{cases}
$$

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\十进制减法计数器状态转换图.png" style="zoom:50%;" />



#### Ⅲ 中规模集成同步十进制加法计数器 $74160(74LS160)$

<img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\74160.png" style="zoom:15%;" />

- 进位脉冲在 1001 时出现



## 三、任意进制计数器的构成方法（N→M）

#### ① M<N

- **在 $N$ 进制计数器的顺序计数过程中，设法使之跳过 $N-M$ 个状态**

  <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\置零法与置数法.png" style="zoom:55%;" />

  - **置零法（复位法）**

    - **提供清零信号的状态为 $S_M$ 而非 $S_{M-1}$**

    - 示例：将 $74160$ 接成六进制计数器

      <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\将 $74150$ 接成六进制计数器.png" style="zoom:67%;" />

      <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\将 $74150$ 接成六进制计数器 波形.png" style="zoom:20%;" />

  - **置数法（置位法）**

    - **注意 $74LS161(160)$ 为同步预置数； $74LS191(190)$ 为异步预置数**

      - **同步置数的置数信号应由 $S_{M-1}$ 产生；异步置数的置数信号应由 $S_M$ 产生**

    - 同步置零法的初态一定是 $S_0$，而置数法的初态可以是任何一个状态，只要跳过 $N-M$ 个状态即可

    - 示例：将 $74160$ 接成六进制计数器

      - 到5同步置0

      <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\将 $74160$ 接成六进制计数器置数法1.png" style="zoom:100%;" />
      
      - 到4同步置9
      
      <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\将 $74160$ 接成六进制计数器置数法2.png" style="zoom:80%;" />

#### ② M>N

- 并行进位：**用同一个 $CLK$，低位片的进位输出作为高位片的计数控制信号**（如 $74160$ 的 $EP、ET$）

  - 将两片 $74160$ 接成 100 进制计数器

    <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\100进制 并行进位.png" style="zoom:60%;" />

- 串行进位：**低位片的进位输出作为高位片的 $CLK$，两片始终同时处于计数状态**

  - 将两片 $74160$ 接成 100 进制计数器

    <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\100进制 串行进位.png" style="zoom:74%;" />

- 若 $M\neq N^2$ ，则用 $M<N^2$ 的置零、置数方式

  - 示例：将 $74LS160$ 接成29进制计数器

    - 异步整体置零

      <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\将 $74LS160$ 接成29进制计数器 异步整体置零.png" style="zoom:70%;" />

    - 同步整体置数

      <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\将 $74LS160$ 接成29进制计数器 同步整体置数.png" style="zoom:67%;" />



## 四、时序逻辑电路的设计方法

- 设计步骤

  1. 根据任务要求**列出电路的状态转换表或转换图**

  2. **状态化简（**等价状态合并）

  3. 根据电路的状态表确定**触发器的数目 n**
     $$
     2^{n-1}<M\leq2^n
     $$

  4. 根据状态转换表画出电路**次态逻辑函数卡诺图**

  5. 由卡诺图求出电路的**状态方程和输出方程**

  6. 由状态方程写出电路的**驱动方程**

  7. 由驱动方程和输出方程**画出逻辑图**

  8. **检查电路是否能自行启动**



- 示例：设计一个带有进位输出端的十三进制计数器

  1. 状态转换表

     <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\十三进制计数器状态转换表.png" style="zoom:16%;" />

  2. 无需化简

  3. 触发器数目：4

  4. 次态卡诺图

     <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\十三进制计数器次态卡诺图.png" style="zoom:15%;" />

  5. 状态方程和输出方程
     $$
     \begin{cases}
     𝑄_0^∗=𝑄_3^′ 𝑄_0^′+𝑄_2^′ 𝑄_0^′\\
     𝑄_1^∗=𝑄_1 𝑄_0^′+𝑄_1^′ 𝑄_0\\
     𝑄_2^∗=𝑄_2^′ 𝑄_1 𝑄_0+𝑄_3^′ 𝑄_2 𝑄_1^′+𝑄_3^′ 𝑄_2 𝑄_0^′\\
     𝑄_3^∗=𝑄_3 𝑄_2^′+𝑄_2 𝑄_1 𝑄_0
     \end{cases}
     $$

     $$
     𝐶=𝑄_3 𝑄_2
     $$

  6. 若选用 JK触发器
     $$
     Q^*=JQ'+K'Q
     $$

     - 则将状态方程化为标准形式

     $$
     \begin{cases}
     𝑄_3^∗&=𝑄_3𝑄_2 '+𝑄_2𝑄_1𝑄_0(𝑄_3 '+𝑄_3)&=𝑄_2𝑄_1𝑄_0𝑄_3 '+𝑄_2 '𝑄_3
     \\𝑄_2^∗&=𝑄_3'𝑄_2𝑄_1'+𝑄_3'𝑄_2𝑄_0'+𝑄_2'𝑄_1𝑄_0&=𝑄_0𝑄_1𝑄_2'+𝑄_3'(𝑄_1𝑄_0)'⋅𝑄_2
     \\𝑄_1^∗&=𝑄_1'𝑄_0+𝑄_1𝑄_0'&=𝑄_0𝑄_1'+𝑄_0'𝑄_1
     \\𝑄_0^∗&=𝑄_3'𝑄_0'+𝑄_2'𝑄_0'&=(𝑄_3𝑄_2)'⋅𝑄_0'+1'𝑄_0
     \end{cases}
     $$

     - 可得各触发器驱动方程

     $$
     \begin{cases}
     J_3=Q_2Q_1Q_0&K_3=Q_2\\
     J_2=Q_1Q_0&K_2=(Q_3'(Q_1Q_0)')'\\
     J_1=Q_0&K_1=Q_0\\
     J_0=(Q_3Q_2)'&K_0=1
     \end{cases}
     $$

  7. 画出逻辑图

     <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\十三进制计数器.png" style="zoom:13%;" />

  8. 检查能否自启动

     <img src="D:\Study\Note\电路三合一\数电\5、时序逻辑电路\photos\十三进制计数器状态转换图.png" style="zoom:13%;" />

     - 电路可以自启动
