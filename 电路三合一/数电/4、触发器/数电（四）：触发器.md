# 数电（四）：触发器

## 1、概述

- 时序逻辑电路=组合逻辑电路+存储电路
  - 存储电路
    - 一位数据：存储单元
      - 静态（电路自锁）：**触发器（Flip-flop）**
        - 不切断电源能一直保持存储 $0/1$ 信号
      - 动态：电容的电荷存储效应
        - 速度慢，会随时间
    - 一组数据：寄存器（一组触发器）
    - 大量数据：存储器
      - 随机存储器 RAM：快速读出和写入数据
      - 只读存储器 ROM：仅能读出数据


- 触发器：
  - 特点
    - 状态的自行保持
    - 改变输入可改变所保持的状态
  - 分类
    - 触发方式：基本SR/电平/脉冲/边沿触发器
    - 逻辑功能：SR锁存器、JK/D/T/T'触发器
    - 结构：基本SR锁存器、同步SR触发器、主从触发器、维持阻塞触发器、边沿触发器



## 2、SR锁存器

- 由**或非门**构成的SR锁存器

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\或非门构成的SR锁存器.png" style="zoom:33%;" />

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\或非门基本RS--FF特性表.png" style="zoom:33%;" />

  - **$S_D$  ：置 $1$ 端**
  - **$R_D$ ：置 $0$ 端**
    - **全 $0$ 保持，全 $1$ 禁态，$S$ $1$ 为 $1$ ，$R \ 1$ 为 $0$**
    - **画波形时注意禁态时 $Q=Q'=0$** 

  

  - 禁态
    - $S_D$ 和 $R_D$ 的 $1$ 状态加上后，首先逻辑上既置 $0$ 又置 $1$，导致 $Q^{*}$ 和  $ Q^{*' }$ 端口都置为 $0$ 
    - 若下一时刻 $S_D$ 和 $R_D$ 的 $1$ 状态都消失则会产生竞争-冒险现象（存储的状态不定）：
      - **若 $S_D$ 的 $1$ 状态先消失，则 $Q^*=0$** 
      - **若 $R_D$ 的 $1$ 状态先消失，则 $Q^*=1$** 
    - 因此
      - 若发生 $S_D$ 和 $R_D$ 都置 $1$ 后，下一时刻都撤掉有效电平，存储的状态是不确定的，存储状态不定，被认为是禁态×，这样输入不被允许
    - 注意
      - **若  $S_D$ 和 $R_D$ 都置 $1$ 后，下一时刻非同时撤掉有效电平（从波形图可以看出），则存储状态是确定的**



- 由**与非门**构成的SR锁存器

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\与非门构成的SR锁存器.png" style="zoom:33%;" />

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\与非门基本RS--FF特性表.png" style="zoom:33%;" />

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\与非门构成的SR锁存器波形.png" style="zoom:33%;" />

  - **与或非门相反**

    - 输入改成了**非**
    - **全 $1$ 保持，全 $0$ 禁态，$R'$ $1$ 为 $1$ ，$S' \ 1$ 为 $0$**

    

  - **画波形时注意禁态时 $Q=Q'=1$** 

  

## 3、触发器

### ①电平触发SR触发器（同步SR触发器）

<img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\电平触发SR触发器.png" style="zoom: 33%;" />

- 功能表

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\SR触发器功能表.png" style="zoom:20%;" />

- **只有在 $CLK=1$ 时，$SR$ 才能起作用**

- 下图为**初态可设置**的触发器

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\有异步复位、置位端的电平触发SR触发器.png" style="zoom:33%;" />

  - 无需设置初态时：
    $$
    S_D'=R_D'=1
    $$

- 电平触发的动作特点

  - 只有当 $CLK$ 变为有效电平时，触发器才能接受输入信号，按输入信号将触发器的输出置成相应的状态
  - 在 $CLK=1$ 的全部时间里，$S$ 和 $R$ 的状态的变化都可能引起输出状态的改变
  - 在 $CLK=0$ 后，触发器保存的是该瞬间的状态

  

- **特性方程**
  $$
  \begin{cases}
  Q^*=S+R'Q\\
  SR=0
  \end{cases}
  $$

- 状态转换图

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\SR触发器状态转换图.png" style="zoom: 67%;" />



### ②脉冲触发SR触发器（主从SR触发器）Master-Slave SR Flip-Flop

<img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\主从触发器.png" style="zoom:33%;" />
$$
CLK_从=CLK'
$$

- 功能表

<img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\主从触发器特性表.png" style="zoom:33%;" />

- **在一次 $CLK$ 作用期间，从触发器状态只翻转一次，但主触发器的状态在 $CLK=1$ 期间仍会多次翻转**

- **仅在 $CLK=1$ 时，$S、R$ 输入保持恒定不变时才成立，否则从触发器状态由 $CLK$ 下降沿到来时刻主触发器的状态（$Q_主$）决定**
- **须满足约束条件 $SR=0$**



### ③同步D触发器

<img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\同步D触发器.png" style="zoom:33%;" />

- 逻辑符号

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\D触发器逻辑符号.png" style="zoom:33%;" />

- 功能表

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\D触发器功能表.png" style="zoom: 40%;" />

- 约束 S 和 R 的取值，即不能同时为1

- **跟随作用：输出Q与输入D状态相同**

- 特性方程
  $$
  Q^*=D
  $$

- 状态转换图

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\D触发器状态转换图png.png" style="zoom: 67%;" />



### ④T触发器

- 逻辑符号

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\T触发器逻辑符号.png" style="zoom: 67%;" />

- 功能表

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\T触发器功能表.png" style="zoom:40%;" />

  - **翻转电平作用**



- 状态转换图

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\T触发器状态转换图.png" style="zoom: 67%;" />

- 特性方程
  $$
  Q^*=TQ'+T'Q
  $$



### ⑤主从JK触发器

<img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\JK触发器.png" style="zoom: 38%;" />

- 逻辑符号

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\JK触发器逻辑符号1.png" style="zoom: 67%;" />

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\JK触发器逻辑符号2.png" style="zoom:67%;" />

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\JK触发器逻辑符号3.png" style="zoom: 18%;" />

  - **第三个的 $CLK$ 符号代表的是：在时钟的下降沿动作**



- 功能表

<img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\JK触发器功能表.png" style="zoom: 33%;" />

- 波形图

<img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\JK触发器波形.png" style="zoom: 67%;" />

- 为了使主从触发器在 $S＝R＝1$ 时也有确定的状态，则**将输出端 $Q$ 和 $Q ’$ 反馈到输入端**，这种触发器称为主从JK触发器



- 动作特点：
  - 分两步动作
    1. 在 $CLK=1$ 时，主触发器受输入信号控制，从触发器保持原态
    2. 在 $CLK↓$ 到达后，从触发器按主触发器状态翻转
  - 在 $CLK=1$ 期间，若 $JK$ 发生变化，**主触发器只可能翻转一次**，因为受到反馈回来的输出端的影响
    - 因为 $JK$ 其中一个输入被锁，而 $SR$ 触发器中，若只有一个输入，则状态仅发生一次变化。无论之后如何输入都不再变化
    - **故在 $CLK=1$ 期间若输入发生变化时 ，要找出 $CLK↓$ 来到前的 $Q$ 状态，以决定 $Q^*$**
  - **$Q=0$ 时，只允许 $J=1$ 的信号进入主触发器**
  - **$Q=1$ 时，只允许 $K=1$ 的信号进入主触发器**



- **特性方程**
  $$
  Q^*=JQ'+K'Q
  $$
  
- 状态转换图

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\JK触发器状态转换图.png" style="zoom: 67%;" />

- 用 $JK$ 触发器构成的 $D$ 触发器和 $ T$ 触发器

  <img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\用JK触发器构成的D触发器和T触发器.png" style="zoom: 24%;" />



### ⑥边沿触发器

<img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\边沿触发器的电路结构.png" style="zoom: 67%;" />

<img src="D:\Study\Note\电路三合一\数电\4、触发器\photos\边沿触发器的波形.png" style="zoom: 40%;" />

- **有圆圈表示 $CP$ 下降沿触发**

- 触发器的次态仅决定于 $CLK$ 的下降沿（或上升沿）到达时刻的输入信号的状态
- 工作原理
  - 在 $CLK=0$ 时
    - 触发器 $FF_1$ 输出状态与 $D$ 相同
    - 触发器 $FF_2$ 状态不变

  - 在 $CLK=1$ （上升沿）时
    - 触发器 $FF_1$ 状态与上升沿到来之前的 $D$ 状态相同并保持
    - 触发器 $FF_2$ 输出 $Q$ 被置成前沿到来之前的 $D$ 状态，而与其他时刻的 $D$ 的状态无关

- **主从$JK$触发器和边沿触发$JK$触发器的区别**
  - 主从$JK$触发器
    - 中间有出现**初次**毛刺现象就会进行翻转，由于只能翻转一次，故会导致输出与理想不一样
  - 边沿触发$JK$触发器
    - 输出只与边沿瞬间的输入有关，中间有毛刺现象不影响最终输出
